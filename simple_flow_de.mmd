flowchart LR
    %% Kunden-Lane
    subgraph Kunde
        C1([Problem melden])
        C2{Kostenvoranschlag genehmigen?}
        C3([Unrepariertes Gerät erhalten])
        C4([Repariertes Gerät abholen])
    end

    %% Werkstatt-Lane
    subgraph Reparaturservice["Reparaturservice"]
        R1[Gerät annehmen und Kunden-Daten erfassen]
        R2[Kostenvoranschlag erstellen]
        R3[Gerät diagnostizieren]
        R4{Reparatur möglich?}
        R5[Reparatur durchführen]
        R6[Gerät testen]
        R7[Gerät als nicht reparierbar erklären]
    end

    %% System / Verwaltung
    subgraph System
        S1[Rechnung erstellen]
        S2[Zahlung entgegennehmen]
    end

    %% Ablauf über Lanes hinweg
    C1 --> R1 --> R2 --> C2

    C2 -- Nein --> C3
    C2 -- Ja --> R3 --> R4

    R4 -- Nein --> R7 --> C3
    R4 -- Ja --> R5 --> R6

    R6 -- Fehlgeschlagen --> R5
    R6 -- Erfolgreich --> S1 --> S2 --> C4
