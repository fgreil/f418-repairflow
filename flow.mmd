flowchart LR
    %% Customer lane
    subgraph Customer
        C1([Report issue])
        C2{Approve estimate?}
        C3([Receive unrepaired phone])
        C4([Pick up repaired phone])
    end

    %% Repair Staff lane
    subgraph Repair_Staff["Repair Staff"]
        R1[Receive phone & record details]
        R2[Provide estimate]
        R3[Diagnose device]
        R4{Repair feasible?}
        R5[Perform repair]
        R6[Test device]
        R7[Declare unrepairable]
    end

    %% System / Admin lane
    subgraph System
        S1[Generate invoice]
        S2[Collect payment]
    end

    %% Cross-lane flows
    C1 --> R1 --> R2 --> C2

    C2 -- No --> C3
    C2 -- Yes --> R3 --> R4

    R4 -- No --> R7 --> C3
    R4 -- Yes --> R5 --> R6

    R6 -- Fail --> R5
    R6 -- Pass --> S1 --> S2 --> C4
